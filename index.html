<meta charset="utf-8" http-equiv="Content-Type" name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=1.0, user-scalable=no">
<!DOCTYPE html>
<html>
   <head>
      <title>Buckhouse</title>
      <base href="/">
      <link rel="shortcut icon" type="image/png" href="img/favicon.png">
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-MNC6R0PR4F"></script>
      <script>
          window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());
         gtag('config', 'G-MNC6R0PR4F');
      </script>
      <!-- Load plotly.js into the DOM -->
	   <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
      <!-- Angular -->
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.js"></script>
      <!-- Angular ui bootstrap -->
      <script data-require="ui-bootstrap@*" data-semver="1.3.0" src="https://cdn.rawgit.com/angular-ui/bootstrap/gh-pages/ui-bootstrap-1.3.0.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.0/ui-bootstrap-tpls.js"></script>
      <!-- Angular Route -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-route/1.8.3/angular-route.min.js"></script>
      <!-- Font awesome -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
      <!-- jQuery -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <!-- Bootstrap js -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
      <!-- Leaflet CSS -->
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
       <!-- Make sure you put this AFTER Leaflet's CSS -->
      <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
      <!-- Leaflet radar / rainviewer -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mwasil/Leaflet.Rainviewer/leaflet.rainviewer.css"/>
      <script src="https://cdn.jsdelivr.net/gh/mwasil/Leaflet.Rainviewer/leaflet.rainviewer.js"></script>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mwasil/Leaflet.Rainviewer/leaflet.rainviewer.css"/>
      <script src="https://cdn.jsdelivr.net/gh/mwasil/Leaflet.Rainviewer/leaflet.rainviewer.js"></script>
      <!-- Leaflet fullscreen -->
      <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js'></script>
      <link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css' rel='stylesheet' />
      <!-- Leaflet JS -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/ui-leaflet/1.0.3/ui-leaflet.js" integrity="sha512-hTQMlplfmfbCYIS+0QkU3rnAuQovZU55Imyh4NwK88E1xsi6waWHbmVZyAa7SHntf9lBaTujtQjt/JbmA5HaYg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
      <!-- Angular simple logger -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-simple-logger/0.1.7/angular-simple-logger.js" integrity="sha512-IslJDGaeL0IGHM256peNRfFtWOeHP+VLZ0dhAafCK2v7fU2N2UJhwVCh7wZGFB3c1N1ifAq5Miq7EKWOVU0CDw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
      <!-- Custom scripts -->
      <script src="plotData/geoJsonData.js"></script>
      
      <!-- Country ski resort data -->
      <!-- AFRICA -->
      <script src="resortData/africa/lesothoData.js"></script>
      <script src="resortData/africa/moroccoData.js"></script>
      <script src="resortData/africa/southAfricaData.js"></script>
      <!-- ASIA -->
      <script src="resortData/asia/armeniaData.js"></script>
      <script src="resortData/asia/azerbaijanData.js"></script>
      <script src="resortData/asia/chinaData.js"></script>
      <script src="resortData/asia/georgiaData.js"></script>
      <script src="resortData/asia/indiaData.js"></script>
      <script src="resortData/asia/iranData.js"></script>
      <script src="resortData/asia/israelData.js"></script>
      <script src="resortData/asia/japanData.js"></script>
      <script src="resortData/asia/kazakhstanData.js"></script>
      <script src="resortData/asia/kyrgyzstanData.js"></script>
      <script src="resortData/asia/mongoliaData.js"></script>
      <script src="resortData/asia/montenegroData.js"></script>
      <script src="resortData/asia/northKoreaData.js"></script>
      <script src="resortData/asia/pakistanData.js"></script>
      <script src="resortData/asia/russiaData.js"></script>
      <script src="resortData/asia/southKoreaData.js"></script>
      <script src="resortData/asia/tajikistanData.js"></script>
      <script src="resortData/asia/turkeyData.js"></script>
      <script src="resortData/asia/uzbekistanData.js"></script>
      <!-- EUROPE -->
      <script src="resortData/europe/andorraData.js"></script>
      <script src="resortData/europe/austriaData.js"></script>
      <script src="resortData/europe/belgiumData.js"></script>
      <script src="resortData/europe/bosniaAndHerzegovina.js"></script>
      <script src="resortData/europe/bulgariaData.js"></script>
      <script src="resortData/europe/croatiaData.js"></script>
      <script src="resortData/europe/cyprusData.js"></script>
      <script src="resortData/europe/czechRepublicData.js"></script>
      <script src="resortData/europe/denmarkData.js"></script>
      <script src="resortData/europe/finlandData.js"></script>
      <script src="resortData/europe/franceData.js"></script>
      <script src="resortData/europe/germanyData.js"></script>
      <script src="resortData/europe/greeceData.js"></script>
      <script src="resortData/europe/hungaryData.js"></script>
      <script src="resortData/europe/icelandData.js"></script>
      <script src="resortData/europe/irelandData.js"></script>
      <script src="resortData/europe/italyData.js"></script>
      <script src="resortData/europe/kosovoData.js"></script>
      <script src="resortData/europe/latviaData.js"></script>
      <script src="resortData/europe/liechtensteinData.js"></script>
      <script src="resortData/europe/lithuaniaData.js"></script>
      <script src="resortData/europe/netherlandsData.js"></script>
      <script src="resortData/europe/norwayData.js"></script>
      <script src="resortData/europe/polandData.js"></script>
      <script src="resortData/europe/portugalData.js"></script>
      <script src="resortData/europe/romaniaData.js"></script>
      <script src="resortData/europe/serbiaData.js"></script>
      <script src="resortData/europe/slovakiaData.js"></script>
      <script src="resortData/europe/sloveniaData.js"></script>
      <script src="resortData/europe/spainData.js"></script>
      <script src="resortData/europe/swedenData.js"></script>
      <script src="resortData/europe/switzerlandData.js"></script>
      <script src="resortData/europe/ukraineData.js"></script>
      <script src="resortData/europe/unitedKingdomData.js"></script>

      <!-- NORTH AMERICA -->
      <script src="resortData/northAmerica/canadaData.js"></script>
      <script src="resortData/northAmerica/greenlandData.js"></script>
      <script src="resortData/northAmerica/unitedStatesData.js"></script>

      <!-- OCEANIA -->
      <script src="resortData/oceania/australiaData.js"></script>
      <script src="resortData/oceania/newZealandData.js"></script>

      <!-- SOUTH AMERICA -->
      <script src="resortData/southAmerica/argentinaData.js"></script>
      <script src="resortData/southAmerica/brazilData.js"></script>
      <script src="resortData/southAmerica/chileData.js"></script>

      <script>
         var globalData = canadaData.concat(switzerlandData).concat(austriaData).concat(franceData).concat(japanData).concat(unitedKingdomData).concat(polandData).concat(germanyData).concat(italyData).concat(serbiaData).concat(newZealandData).concat(indiaData).concat(iranData).concat(southAfricaData).concat(australiaData).concat(argentinaData).concat(brazilData).concat(chileData).concat(chinaData).concat(armeniaData).concat(georgiaData).concat(israelData).concat(kazakhstanData).concat(southKoreaData).concat(pakistanData).concat(belgiumData).concat(moroccoData).concat(lesothoData).concat(andorraData).concat(bulgariaData).concat(croatiaData).concat(cyprusData).concat(czechRepublicData).concat(finlandData).concat(norwayData).concat(portugalData).concat(romaniaData).concat(russiaData).concat(slovakiaData).concat(sloveniaData).concat(spainData).concat(swedenData).concat(turkeyData).concat(ukraineData).concat(latviaData).concat(greeceData).concat(icelandData).concat(unitedStatesData).concat(montenegroData).concat(liechtensteinData).concat(hungaryData).concat(kyrgyzstanData).concat(uzbekistanData).concat(kosovoData).concat(azerbaijanData).concat(greenlandData).concat(irelandData).concat(northKoreaData).concat(denmarkData).concat(lithuaniaData).concat(tajikistanData).concat(mongoliaData).concat(netherlandsData).concat(bosniaAndHerzegovinaData);
      </script>

      <!-- CSS -->
      <link rel="stylesheet" href="styles/style.css"/>

   </head>
   <body ng-app="myApp" ng-controller="myCtrl">
      <div class="container-fluid">
         <nav class="navbar navbar-default">
            <div class="container-fluid">
              <!-- Brand and toggle get grouped for better mobile display -->
              <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="javascript:void(0);" ng-click="infoModal()"><span class="text-primary"><b>The Buckhouse Ski Map</b></span></a>
              </div>
          
              <!-- Collect the nav links, forms, and other content for toggling -->
              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

               <ul class="nav navbar-nav">
                  <!-- NORTH AMERICA -->
                  <li class="dropdown">
                     <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">North America <span class="caret"></span></a>
                     <ul class="dropdown-menu">
                        <li><a href="#!continent/northAmerica">North America</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#!country/unitedStates">United States</a></li>
                        <li><a href="#!country/canada">Canada</a></li>
                        <li><a href="#!country/greenland">Greenland</a></li>
                     </ul>
                   </li>
                  <!-- EUROPE -->
                   <li class="dropdown">
                     <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Europe <span class="caret"></span></a>
                     <ul class="dropdown-menu">
                        <li><a href="#!continent/europe">Eurpoe</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#!country/andorra">Andorra</a></li>
                        <li><a href="#!country/austria">Austria</a></li>
                        <li><a href="#!country/belgium">Belgium</a></li>
                        <li><a href="#!country/bosniaAndHerzegovina">Bosnia And Herzego</a></li>
                        <li><a href="#!country/bulgaria">Bulgaria</a></li>
                        <li><a href="#!country/croatia">Croatia</a></li>
                        <li><a href="#!country/cyprus">Cyprus</a></li>
                        <li><a href="#!country/czechRepublic">CzechRepublic</a></li>
                        <li><a href="#!country/denmark">Denmark</a></li>
                        <li><a href="#!country/finland">Finland</a></li>
                        <li><a href="#!country/france">France</a></li>
                        <li><a href="#!country/germany">Germany</a></li>
                        <li><a href="#!country/greece">Greece</a></li>
                        <li><a href="#!country/hungary">Hungary</a></li>
                        <li><a href="#!country/iceland">Iceland</a></li>
                        <li><a href="#!country/ireland">Ireland</a></li>
                        <li><a href="#!country/italy">Italy</a></li>
                        <li><a href="#!country/kosovo">Kosovo</a></li>
                        <li><a href="#!country/latvia">Latvia</a></li>
                        <li><a href="#!country/liechtenstein">Liechtenstein</a></li>
                        <li><a href="#!country/lithuania">Lithuania</a></li>
                        <li><a href="#!country/netherlands">Netherlands</a></li>
                        <li><a href="#!country/norway">Norway</a></li>
                        <li><a href="#!country/poland">Poland</a></li>
                        <li><a href="#!country/portugal">Portugal</a></li>
                        <li><a href="#!country/romania">Romania</a></li>
                        <li><a href="#!country/serbia">Serbia</a></li>
                        <li><a href="#!country/slovakia">Slovakia</a></li>
                        <li><a href="#!country/slovenia">Slovenia</a></li>
                        <li><a href="#!country/spain">Spain</a></li>
                        <li><a href="#!country/sweden">Sweden</a></li>
                        <li><a href="#!country/switzerland">Switzerland</a></li>
                        <li><a href="#!country/ukraine">Ukraine</a></li>
                        <li><a href="#!country/unitedKingdom">United Kingdom</a></li>
                     </ul>
                   </li>
                   <!-- AFRICA -->
                   <li class="dropdown">
                     <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Africa <span class="caret"></span></a>
                     <ul class="dropdown-menu">
                        <li><a href="#!continent/africa">Africa</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#!country/lesotho">Lesotho</a></li>
                        <li><a href="#!country/morocco">Morocco</a></li>
                        <li><a href="#!country/southAfrica">South Africa</a></li>
                     </ul>
                   </li>
                   <!-- ASIA -->
                   <li class="dropdown">
                     <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Asia <span class="caret"></span></a>
                     <ul class="dropdown-menu">
                        <li><a href="#!continent/asia">Asia</a></li>
                        <li role="separator" class="divider"></li>
                       <li><a href="#!country/armenia">Armenia</a></li>
                       <li><a href="#!country/azerbaijan">Azerbaijan</a></li>
                       <li><a href="#!country/china">China</a></li>
                       <li><a href="#!country/georgia">Georgia</a></li>
                       <li><a href="#!country/india">India</a></li>
                       <li><a href="#!country/iran">Iran</a></li>
                       <li><a href="#!country/israel">Israel</a></li>
                       <li><a href="#!country/japan">Japan</a></li>
                       <li><a href="#!country/kazakhstan">Kazakhstan</a></li>
                       <li><a href="#!country/kyrgyzstan">Kyrgyzstan</a></li>
                       <li><a href="#!country/mongolia">Mongolia</a></li>
                       <li><a href="#!country/montenegro">Montenegro</a></li>
                       <li><a href="#!country/northKorea">North Korea</a></li>
                       <li><a href="#!country/pakistan">Pakistan</a></li>
                       <li><a href="#!country/russia">Russia</a></li>
                       <li><a href="#!country/southKorea">South Korea</a></li>
                       <li><a href="#!country/tajikistan">Tajikistan</a></li>
                       <li><a href="#!country/tyrkey">Turkey</a></li>
                       <li><a href="#!country/uzbekistan">Uzbekistan</a></li>
                     </ul>
                   </li>
                  <!-- OCEANIA -->
                  <li class="dropdown">
                     <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Oceania <span class="caret"></span></a>
                     <ul class="dropdown-menu">
                        <li><a href="#!continent/oceania">Oceania</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#!country/australia">Australia</a></li>
                        <li><a href="#!country/newZealand">New Zealand</a></li>
                     </ul>
                  </li>
                  <!-- SOUTH AMERICA -->
                  <li class="dropdown">
                     <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">South America <span class="caret"></span></a>
                     <ul class="dropdown-menu">
                        <li><a href="#!continent/southAmerica">South America</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#!country/argentina">Argentina</a></li>
                        <li><a href="#!country/brazil">Brazil</a></li>
                        <li><a href="#!country/chile">Chile</a></li>
                     </ul>
                  </li>
               </ul>

               <ul class="nav navbar-nav navbar-right">

                  <!-- Timeline -->
                  <li><a href="javascript:void(0);" ng-click="timelineModal()">Travel Progress <i class="fa fa-line-chart"></i></a></li>
                  <!-- Calendar -->
                  <li><a href="javascript:void(0);" ng-click="calendarModal()">Calendar <i class="fa fa-calendar"></i></a></li>
                  <!-- Settings -->
                  <li class="dropdown">
                     <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                        Settings <span ng-show="showPasses !== 'all'">({{showPasses}}) </span><span ng-show="showVisited !== 'all'">({{showVisited}}) </span><i class="fa fa-gear"></i><span class="caret"></span>
                     </a>
                     <ul class="dropdown-menu my-dropdown">
                        <!-- Toggle Icon -->
                        <li class="dropdown-header" ng-show="!showGlobal">Toggle Icon</li>
                        <li ng-show="!showGlobal">
                           <a href="javascript:void(0);">
                              <label class="radio-inline">
                                 <input type="radio" name="optradio" ng-change="updateMarker()" ng-model="plainMarker" ng-value="false"> 
                                 <img src="img/snowboard_marker/not_visited.png" alt="snowboard marker" width="12" height="20"> 
                              </label>
                              <label class="radio-inline">
                                 <input type="radio" name="optradio" ng-change="updateMarker()" ng-model="plainMarker" ng-value="true">
                                 <img src="img/plain_marker/not_visited.png" alt="plain marker" width="12" height="20">
                              </label>
                           </a>
                        </li>
                        <li role="seperator" class="divider"></li>
                        <li class="dropdown-header">Ski Pass</li>
                        <li>
                            <li>
                               <a href="#!pass/ikon">
                                  <input type="radio" name="Epic" ng-model="showPasses" value="Epic">
                                  <span>Epic</span>
                               </a>
                            </li>
                            <li>
                               <a href="#!pass/ikon">
                                  <input type="radio" name="Ikon" ng-model="showPasses" value="Ikon">
                                  <span>Ikon</span>
                               </a>
                            </li>
                            <li>
                               <a href="#!pass/mountainCollective">
                                  <input type="radio" name="Mountain Collective" ng-model="showPasses" value="Mountain Collective">
                                  <span>Mountain Collective</span>
                               </a>
                            </li>
                            <li>
                               <a href="#!pass/powderAlliance">
                                  <input type="radio" name="Powder Alliance" ng-model="showPasses" value="Powder Alliance">
                                  <span>Powder Alliance</span>
                               </a>
                            </li>
                            <li>
                              <a href="#!pass/indy">
                                 <input type="radio" name="Indy" ng-model="showPasses" value="Indy">
                                 <span>Indy</span>
                              </a>
                           </li>
                           <li>
                              <a href="#!pass/noPassAssociated">
                                 <input type="radio" name="No Pass Associated" ng-model="showPasses" value="No Pass Associated">
                                 <span>No Pass Associated</span>
                              </a>
                           </li>
                         </li>
                         <li role="seperator" class="divider"></li>
                         <li class="dropdown-header">Visited</li>
                         <li>
                             <li>
                                <a href="javascript:void(0);">
                                   <input type="radio" name="all1" ng-change="updateVisited()" ng-model="showVisited" value="all"> 
                                   <span>Show All</span>
                                </a>
                             </li>
                             <li>
                                <a href="javascript:void(0);">
                                   <input type="radio" name="Visited" ng-change="updateVisited()" ng-model="showVisited" value="Visited">
                                   <span>Visited</span>
                                </a>
                             </li>
                             <li>
                                 <a href="javascript:void(0);">
                                    <input type="radio" name="Not Visited" ng-change="updateVisited()" ng-model="showVisited" value="Not Visited">
                                    <span>Not Visited</span>
                                 </a>
                             </li>
                         </li>
                        <li role="seperator" class="divider"></li>
                        <li class="dropdown-header">Reviewed</li>
                        <li>
                           <li>
                              <a href="javascript:void(0);">
                                 <input type="radio" name="all2" ng-change="updateReviewed()" ng-model="showReviewed" value="all"> 
                                 <span>Show All</span>
                              </a>
                           </li>
                           <li>
                              <a href="javascript:void(0);">
                                 <input type="radio" name="Reviewed" ng-change="updateReviewed()" ng-model="showReviewed" value="Reviewed">
                                 <span>Reviewed</span>
                              </a>
                           </li>
                        </li>
                     </ul>
                  </li>
                  <!-- JB Status -->
                  <li class="dropdown">
                     <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">JB Status <span class="caret"></span></a>
                     <ul class="dropdown-menu">
                        <li><a href="#!status/visited">Visited</a></li>
                        <li><a href="#!status/notVisited">Not Visited (U.S. Only)</a></li>
                        <li><a href="#!status/reviewed">Reviewed</a></li>
                        <li><a href="#!status/notReviewed">Not Reviewed (U.S. Only)</a></li>
                     </ul>
                  </li>
                  <!-- PASSES -->
                  <li class="dropdown">
                     <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Pass Type <span class="caret"></span></a>
                     <ul class="dropdown-menu">
                        <li><a href="#!pass/epic">Epic</a></li>
                        <li><a href="#!pass/ikon">Ikon</a></li>
                        <li><a href="#!pass/indy">Indy</a></li>
                        <li><a href="#!pass/mountainCollective">Mountain Collective</a></li>
                        <li><a href="#!pass/powderAlliance">Powder Alliance</a></li>
                        <li><a href="#!pass/noPassAssociated">No Pass Associated (U.S. Only)</a></li>
                     </ul>
                  </li>
                </ul>
              </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
         </nav>
         
         <div ng-view></div>
       
         <!-- THE SEARCH BOX  -->
         <br>

         <!-- Progress -->
         <div>
            <p>Johnathan has visited {{visitedCount}} out of the {{skiResortCount | number:0}}<a class="disclaimer-count" ng-click="goToChangeLog()" uib-tooltip="This number is subject to change. See 'Change Log' at the bottom of this page for more information.">*</a> <span ng-show="!showGlobal">U.S.</span><span ng-show="showGlobal">global</span> ski resorts so far! <i>last updated: {{lastUpdated}}</i></p>
         </div>

         <!-- Search column -->
         <div>
            <div class="input-group">
               <span class="input-group-addon"><i class="fa fa-search"></i></span>
               <input type="text" class="form-control" name="msg" placeholder="Monarch Ski Area" ng-model="search">
            </div>
         </div>

         <br>
         <div class="pane">
            <table class="table table-hover table-condensed">
               <tr>
                  <th>
                     <a ng-click="myOrder('resortName'); reverseSort = !reverseSort">
                        <span>Resort Name (Map Link)</span> 
                        <span ng-show="orderByField == 'resortName'">
                           <span ng-show="!reverseSort"><i class="fa fa-caret-up"></i></span>
                           <span ng-show="reverseSort"><i class="fa fa-caret-down"></i></span>
                        </span>
                     </a>
                  </th>
                  <th>
                     <a ng-click="myOrder('resortReview.score'); reverseSort = !reverseSort">
                        <span>Score</span> 
                        <span ng-show="orderByField == 'resortReview.score'">
                           <span ng-show="!reverseSort"><i class="fa fa-caret-up"></i></span>
                           <span ng-show="reverseSort"><i class="fa fa-caret-down"></i></span>
                        </span>
                     </a>
                  </th>
                  <th>
                     <a ng-click="myOrder('skiPass'); reverseSort = !reverseSort">
                        <span title="See ski pass website for more information.">Ski Pass</span> 
                        <span ng-show="orderByField == 'skiPass'">
                           <span ng-show="!reverseSort"><i class="fa fa-caret-up"></i></span>
                           <span ng-show="reverseSort"><i class="fa fa-caret-down"></i></span>
                        </span>
                     </a>
                  </th>
                  <th>
                     <a ng-click="myOrder('region'); reverseSort = !reverseSort">
                        <span>Region</span> 
                        <span ng-show="orderByField == 'region'">
                           <span ng-show="!reverseSort"><i class="fa fa-caret-up"></i></span>
                           <span ng-show="reverseSort"><i class="fa fa-caret-down"></i></span>
                        </span>
                     </a>
                  </th>
                  <th>
                     <a ng-click="myOrder('state'); reverseSort = !reverseSort">
                        <span>State</span> 
                        <span ng-show="orderByField == 'state'">
                           <span ng-show="!reverseSort"><i class="fa fa-caret-up"></i></span>
                           <span ng-show="reverseSort"><i class="fa fa-caret-down"></i></span>
                        </span>
                     </a>
                  </th>
                  <th>
                     <a ng-click="myOrder('city'); reverseSort = !reverseSort">
                        <span>City</span> 
                        <span ng-show="orderByField == 'city'">
                           <span ng-show="!reverseSort"><i class="fa fa-caret-up"></i></span>
                           <span ng-show="reverseSort"><i class="fa fa-caret-down"></i></span>
                        </span>
                     </a>
                  </th>
                  <th>
                     <a ng-click="myOrder('videos.length'); reverseSort = !reverseSort">
                        <span>Videos</span> 
                        <span ng-show="orderByField == 'videos.length'">
                           <span ng-show="!reverseSort"><i class="fa fa-caret-up"></i></span>
                           <span ng-show="reverseSort"><i class="fa fa-caret-down"></i></span>
                        </span>
                     </a>
                  </th>
               </tr>
               <tr ng-repeat="data in allData | orderBy : orderByField : reverseSort | filter : search" onclick="tableRowClick(this)">
                  <td style="max-width:400px;">
                     <i ng-show="data.videos.length>0" class="fa fa-check-square"></i> 
                     <i ng-show="data.videos.length===0" class="fa fa-square"></i>
                     <span>
                        <a ng-show="!!data.mapLink" href="javascript:void(0);" ng-click="mapModal(data)" title="Resort Map">{{data.resortName}}</a>
                        <span ng-show="!data.mapLink">{{data.resortName}}</span>
                        <span ng-show="data.webcam"><a ng-click="webcamModal(data)" onclick="return false;"><i class="fa fa-video-camera" aria-hidden="true"></i></a></span>
                     </span>
                  </td>
                  <td>
                     <span ng-show="!data.resortReview.score && data.id"><a ng-click="openModal(data)" onclick="return false;">N/A</a></span>
                     <span ng-show="!data.resortReview.score && !data.id">N/A</span>
                     <span ng-show="data.resortReview.score && !data.resortReview.note">
                           <a ng-click="openModal(data)" onclick="return false;">{{data.resortReview.score}}/100</a>
                     </span>
                     <span ng-show="data.resortReview.score && data.resortReview.note">
                        <a ng-click="openModal(data)" onclick="return false;" uib-tooltip="{{data.resortReview.note}}">{{data.resortReview.score}}/100*</a>
                     </span>
                  </td>
                  <td>
                     <span ng-repeat="pass in data.skiPass track by $index">
                        <span ng-show="pass==='Epic'">
                           <a target="_blank" href="https://www.epicpass.com">{{pass}}</a><span ng-show="$index + 1 < data.skiPass.length">,</span>
                        </span>
                        <span ng-show="pass==='Ikon'">
                           <a target="_blank" href="https://www.ikonpass.com">{{pass}}</a><span ng-show="$index + 1 < data.skiPass.length">,</span>
                        </span>
                        <span ng-show="pass==='Mountain Collective'">
                           <a target="_blank" href="https://www.mountaincollective.com">{{pass}}</a><span ng-show="$index + 1 < data.skiPass.length">,</span>
                        </span>
                        <span ng-show="pass==='Powder Alliance'">
                           <a target="_blank" href="https://www.powederalliance.com">{{pass}}</a><span ng-show="$index + 1 < data.skiPass.length">,</span>
                        </span>
                        <span ng-show="pass==='Indy'">
                           <a target="_blank" href="https://www.indyskipass.com/">{{pass}}</a><span ng-show="$index + 1 < data.skiPass.length">,</span>
                        </span>
                     </span>
                  </td>
                  <td>{{data.region}}</td>
                  <td>{{data.state}}</td>
                  <td>{{data.city}}</td>
                  <!-- <a ng-href="http://www.gravatar.com/avatar/{{hash}}">link1</a> -->
                  <td> 
                     <span ng-show="data.videos.length===0">{{data.videos.length}}</span>
                     <span ng-show="data.videos.length>0">
                        <a target="_blank" ng-href="https://www.youtube.com/watch_videos?video_ids={{data.videos.join(',')}}">{{data.videos.length}}</a>
                     </span>
                  </td>
               </tr>
            </table>
         </div>

         <div>
            <hr>
            <hr>
            <h3>Johnathan's Stats</h3>

            <p><b>Every <span ng-show="!showGlobal">U.S.</span><span ng-show="showGlobal">Global</span> Ski Resort Progress</b></p>
            <div class="row">
                  <my-progress-bar title="Overall" progress="{{(visitedCount / skiResortCount)*100}}"></my-progress-bar>
            </div>
            
            <!-- A bunch of graphs -->
            <div id='StateVisitedHeatMap'></div>
            <div id='RegionVisitedHeatMap'></div>
            <div id='newResortsBySeason'></div>
            <div id='daysTotalBySeason'></div>
            <div id='viewsBySeason'></div>
            <div id='videosBySeason'></div>
            <div id='viewsTotalBySeason'></div>
            <div id='videoViewsByMonth'></div>
            <div id='totalViewsPerMonth'></div>

            <p><b>Notes:</b></p>
            <ul>
               <li>If Johnathan can go to 40 new resorts a season, he'll finish the U.S. resorts by 2031. Good luck Johnathan!</li>
               <li>Season 0 is considered the videos on his channel before he started making the vlogs (2011-2016).</li>
               <li>Live streams, family vlogs, mountain biking, wakeboarding, skateboarding videos, etc. are not included in this website.</li>
               <li>If you have any suggestions or questions, feel free to email Kenny <a href="mailto:shellnut@gmail.com?subject=Buckhouse Ski Map" target="_top"> shellnut@gmail.com</a>.</li>
            </ul>

            <p id="change-log"><b>Change Log:</b></p>
            <ul>
               <li>The original U.S. resort list came from <a href="https://en.wikipedia.org/wiki/List_of_ski_areas_and_resorts_in_the_United_States" target="_blank">Wikipedia</a>. The list on this site will continue to be fine tuned as time goes on.</li>
               <li>08/25/23 - Removing Bluebird Resort. They closed in 2023 due to lack of funding.</li>               
               <li>01/18/23 - Adding Hunt Hollow Ski Club in Naples, New York.</li>
               <li>01/16/23 - Adding Coppervale Ski Hill in Susanville, CA.</li>
               <li>01/03/23 - Adding Missaukee Ski Mountain in Lake City, Michigan.</li>
               <li>10/25/22 - Removing Mount Elk Ridge Ski area because the ski resort has closed temporarily. AZ snowbowl bought it and are planning for it to be a learning hill and tube park.</li>
               <li>10/22/22 - Removing Mount Aggie Ski Slope due to the fact that it's only open to kinesiology students at Texas A&M.</li>
               <li>10/19/22 - Adding Bluebird Resort. Adding Indy Pass Option.</li>
               <li>08/09/22 - Removing Summit Ski Area, Oregon. TImberline bought this ski resort.</li>
               <li>07/15/22 - Removing Challenge Mountain in Michigan. It's a place specifically for people with disabilities to do various activities. It's a non-profit where you would work with volunteers to do a specific session.</li>
               <li>07/05/22 - Removing Texas Ski Ranch since it doesn't exist anymore.</li>
               <li>04/14/22 - Adding Pinehurst in Wisconsin and adding Chugach Powder Guides in Alaska.</li>
               <li>03/31/22 - Removing Norway Mountain in Michigan. Apparently Norway Mountain was sold in 2018 and has not reopened since (and no activity since then on Facebook).</li>
               <li>03/31/22 - Removing Apple Mountain in Michigan. Their website only talks about golf and a restaurant. And <a href="https://milsap.wordpress.com/regions/southeast-lower-peninsula-areas/tri-cities/apple-mountain-freeland/" target="_blank">this</a> says they stopped winter activities in 2018.</li>
               <li>03/31/22 - Removing Garland Resort in Michigan. Garland Resort doesn't have downhill skiing or snowboarding, just <a href="https://www.garlandusa.com/winter/winter-info" target="_blank">cross country</a> skiing.</li>
               <li>01/30/22 - Adding Oglebay Ski Area (Nutting Winter Sports Area) in Wheeling, West Virginia.</li>
               <li>12/24/21 - Adding Ascutney Outdoors in Brownsville, Vermont Cockaigne Ski Resort in Cherry Creek, NY and Four Seasons Ski Resort in Fayetteville, NY.</li>
               <li>12/23/21 - Adding Skeetawk in Palmer, Alaska.</li>
               <li>12/22/21 - Removing Raging Buffalo Snowboard Ski Park & Snowtubing because it closed.</li>
               <li>12/20/21 - Removing Blackhawk Ski Club in Middleton, Wisconsin from the list because it's a cross country ski area. Adding Texas Ski Ranch.</li>
               <li>12/20/21 - Optimizng the global resort view to be circles and be less laggy.</li>
               <li>12/08/21 - Removed Telemark Resort in Wisconsin because it is a cross country ski area.</li>
               <li>11/30/21 - Removed Ski Denton in Pennsylvania due to it being closed down in 2014.</li>
               <li>11/03/21 - Added Mount Pleasant of Edinboro in Pennsylvania.</li>
               <li>10/25/21 - Seperated Jack Frost Ski Area from Big Boulder Mountain. Added Epic to Mar River, Ohio.</li>
               <li>10/09/21 - Removed Mountain View at Edinboro because it's a cross county only ski resort.</li>
               <li>10/07/21 - Added Gladstone Sports Park. Removed Sleepy Hollow Sports Park. Added Helicopter icon to Silverton.</li>
               <li>10/03/21 - Added Maple Ski Ridge near Schenectady, NY. Renamed Hidden Valley Ski center in Vernon, NJ to National Winter Activity Center.</li>
               <li>07/29/21 - Added 'Global Ski Resorts'. Global data came from this website: <a target="_blank" href="https://skimap.org/">https://skimap.org/</a> and may have inconsistiences between the original U.S. data and the data from the skimap API.</li>
               <li>06/16/21 - Added Mount Pisgah Ski Area.</li>
	            <li>05/24/21 - Removed Ski Blandford (a resort in western Massachusetts) because they shut down permanently last year. <a href="https://en.wikipedia.org/wiki/Blandford_Ski_Area" target="_blank">Wikipedia</a>, <a href="https://skiblandford.com/" target="_blank">skiblandford.com</a>.</li>
               <li>04/07/21 - Added clarity to the name of the Snoqualmie resort. The resort are 3 resorts in one (Summit East, West and Central).</li>
               <li>03/22/21 - Added Peek'N Peak Ski Resort.</li>
               <li>03/22/21 - Separated Woodward Park City from Park City.</li>
            </ul>

      </div>

      <br>
      <br>
      <br>

      <div class="navbar navbar-default navbar-fixed-bottom">
               <p class="navbar-text pull-left">
                     Follow Johnathan
                     <a href="https://www.youtube.com/c/JohnathanBuckhouse" target="_blank"><i class="fa fa-youtube-play"></i></a>
                     <a href="https://www.instagram.com/johnathanbuckhouse" target="_blank"><i class="fa fa-instagram"></i></a>
                     <a href="https://twitter.com/johnbuckhouse" target="_blank"><i class="fa fa-twitter"></i></a>
               </p>
               <p class="navbar-text pull-right">
                  Suggestions? <a href="mailto:shellnut@gmail.com?subject=Buckhouse Ski Map" target="_top">shellnut@gmail.com</a>
               </p>
         </div>
                    
   </body>
   <!-- Graphical data -->
   <script src="plotData/graphicalData.js"></script>
   <!-- Plot data -->
   <script src="plotData/plotData.js"></script>
   <!-- my script -->
   <script>

      // Code goes here - TEST
      var app = angular.module('myApp', ['ngRoute', 'ui-leaflet', 'ui.bootstrap']);

      app.config(function($routeProvider) {
         $routeProvider
            .when("/:type1/:type2", {
               templateUrl : "views/location.html",
               controller: 'LocationController'
            })
            .otherwise({ redirectTo: '/country/unitedStates' });
      });

      // Progress bar component
      app.component('myProgressBar', {
         template: `<div class="col-xs-2">{{$ctrl.title}}</div>
                     <div class="col-xs-10">
                        <div class="progress">
                           <div class="progress-bar" role="progressbar" aria-valuenow="{{$ctrl.progress | number:1}}" aria-valuemin="0" aria-valuemax="100" style="width:{{$ctrl.progress | number:1}}%">
                           <span>{{$ctrl.progress | number:1}}%</span>
                           </div>
                        </div>
                     </div>`,
         bindings: {
            title: '@',
            progress: '@'
         }
      });
      
      // Governing app controller
      app.controller('myCtrl', ['$scope', '$uibModal', 'leafletData', 'leafletMarkerEvents', '$location', function($scope, $uibModal, leafletData, leafletMarkerEvents, $location) {


         // Scroll to change log
         $scope.goToChangeLog = function() {
            document.getElementById("change-log").scrollIntoView(); 
         }

         // Custom sort for table
         $scope.myOrder = function(field) {
            // Sort the resort review score by excluding the N/A's
            if (field === 'resortReview.score' && !$scope.reverseSort) {
               $scope.allData.map(val=> {
                  if (!val.resortReview.score) {
                     val.resortReview.score = 0;
                  }
                  return val;
               })
            }
            // Reset resort review score for proper sorting
            else {
               $scope.allData.map(val=> {
                  if (!val.resortReview.score) {
                     val.resortReview.score = '';
                  }
                  return val;
               })
            }
            // Set the order by field for the table
            $scope.orderByField = field;
         }


         // MODAL!!!!
         $scope.animationsEnabled = true;
         $scope.openModal = function (modalData) {

            $scope.modalData = modalData;

            var modalInstance = $uibModal.open({
               animation: $scope.animationsEnabled,
               template: `<div class="modal-header">
                              <h3 class="modal-title">
                                 <div class="row">
                                    <div class="col-xs-11">
                                       <a href="${modalData.website}" target="_blank" title="Resort Website">${modalData.resortName}, ${modalData.state}</a>
                                    </div>
                                    <div class="col-xs-1">
                                       <button class="btn btn-sm" style="float:right; clear:all;" ng-click="ok()">X</button>
                                    </div>
                                 </div>
                           
                              </h3>
                           </div>
                           <div class="modal-body">
                              <div ng-show="${!!modalData.resortReview.link}">
                                 <h4>Johnathan's Resort Review</h4>
                                 <div class="embed-responsive embed-responsive-16by9">
                                    <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/${modalData.resortReview.link}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                 </div>
                                 <br>
                                 <h4>Johnathan's Score</h4>
                                 <dl class="dl-horizontal">
                                    <dt>Overall Score:</dt>
                                    <dd>${modalData.resortReview.score}/100</dd>
                                    <dt ng-show="${!!modalData.resortReview.note}">Note:</dt>
                                    <dd ng-show="${!!modalData.resortReview.note}">${modalData.resortReview.note}</dd>
                                    <dt ng-show="${!!modalData.resortReview.price}">Price:</dt>
                                    <dd ng-show="${!!modalData.resortReview.price}"><uib-rating ng-model="price" max="5"></uib-rating> (${modalData.resortReview.price}/10)</dd>
                                    
                                    <dt ng-show="${!!modalData.resortReview.easeOfAccess}">Ease Of Access:</dt>
                                    <dd ng-show="${!!modalData.resortReview.easeOfAccess}"><uib-rating ng-model="easeOfAccess" max="5"></uib-rating> (${modalData.resortReview.easeOfAccess}/10)</dd>
                                    
                                    <dt ng-show="${!!modalData.resortReview.lodging}">Lodging:</dt>
                                    <dd ng-show="${!!modalData.resortReview.lodging}"><uib-rating ng-model="lodging" max="5"></uib-rating> (${modalData.resortReview.lodging}/10)</dd>
                                    
                                    <dt ng-show="${!!modalData.resortReview.chairLifts}">Chair Lifts:</dt>
                                    <dd ng-show="${!!modalData.resortReview.chairLifts}"><uib-rating ng-model="chairLifts" max="5"></uib-rating> (${modalData.resortReview.chairLifts}/10)</dd>
                                    
                                    <dt ng-show="${!!modalData.resortReview.runs}">Runs:</dt>
                                    <dd ng-show="${!!modalData.resortReview.runs}"><uib-rating ng-model="runs" max="5"></uib-rating> (${modalData.resortReview.runs}/10)</dd>
                                    
                                    <dt ng-show="${!!modalData.resortReview.terrainPark}">Terrain Park:</dt>
                                    <dd ng-show="${!!modalData.resortReview.terrainPark}"><uib-rating ng-model="terrainPark" max="5"></uib-rating> (${modalData.resortReview.terrainPark}/10)</dd>
                                    
                                    <dt ng-show="${!!modalData.resortReview.food}">Food:</dt>
                                    <dd ng-show="${!!modalData.resortReview.food}"><uib-rating ng-model="food" max="5"></uib-rating> (${modalData.resortReview.food}/10)</dd>
                                    
                                    <dt ng-show="${!!modalData.resortReview.employees}">Employees:</dt>
                                    <dd ng-show="${!!modalData.resortReview.employees}"><uib-rating ng-model="employees" max="5"></uib-rating> (${modalData.resortReview.employees}/10)</dd>
                                    
                                    <dt ng-show="${!!modalData.resortReview.views}">Views:</dt>
                                    <dd ng-show="${!!modalData.resortReview.views}"><uib-rating ng-model="views" max="5"></uib-rating> (${modalData.resortReview.views}/10)</dd>
                                                                        
                                    <dt ng-show="${!!modalData.resortReview.fun}">Fun:</dt>
                                    <dd ng-show="${!!modalData.resortReview.fun}"><uib-rating ng-model="fun" max="5"></uib-rating> (${modalData.resortReview.fun}/10)</dd>
                                                                        
                                    <dt ng-show="${!!modalData.resortReview.parking}">Parking:</dt>
                                    <dd ng-show="${!!modalData.resortReview.parking}"><uib-rating ng-model="parking" max="5"></uib-rating> (${modalData.resortReview.parking}/10)</dd>
                                    
                                    <dt ng-show="${!!modalData.resortReview.wouldIGoBack}">Would I Go Back:</dt>
                                    <dd ng-show="${!!modalData.resortReview.wouldIGoBack}"><uib-rating ng-model="wouldIGoBack" max="5"></uib-rating> (${modalData.resortReview.wouldIGoBack}/10)</dd>
                                 </dl>
                              </div>
                              <h4>Ski Resort Infomation</h4>
                              <dl class="dl-horizontal">
                                 <dt ng-show=${!!modalData.website}>Official Website:</dt>
                                 <dd ng-show=${!!modalData.website}><a href="${modalData.website}" target="_blank" title="Resort Website">${modalData.website}</a><dd>
                                 <dt ng-show="!!modalResortData.data.annual_snowfall && modalResortData.data.annual_snowfall!='Unknown'">Annual Snowfall:</dt> 
                                 <dd ng-show="!!modalResortData.data.annual_snowfall && modalResortData.data.annual_snowfall!='Unknown'">{{modalResortData.data.annual_snowfall*0.393701 | number:0}}in</dd>
                                 <dt ng-show="!!modalResortData.data.bottom_elevation && modalResortData.data.bottom_elevation!='Unknown'">Bottom Elevation:</dt>
                                 <dd ng-show="!!modalResortData.data.bottom_elevation && modalResortData.data.bottom_elevation!='Unknown'">{{modalResortData.data.bottom_elevation*3.28084 | number:0}}ft</li></dd>
                                 <dt ng-show="!!modalResortData.data.hourly_lift_capacity && modalResortData.data.hourly_lift_capacity!='Unknown'">Hourly Lift Capacity:</dt>
                                 <dd ng-show="!!modalResortData.data.hourly_lift_capacity && modalResortData.data.hourly_lift_capacity!='Unknown'">{{modalResortData.data.hourly_lift_capacity | number}}</li></dd>
                                 <dt ng-show="!!modalResortData.data.lift_count && modalResortData.data.lift_count!='Unknown'">Lift Count:</dt>
                                 <dd ng-show="!!modalResortData.data.lift_count && modalResortData.data.lift_count!='Unknown'">{{modalResortData.data.lift_count | number}}</li></dd>
                                 <dt ng-show="!!modalResortData.data.longest_run && modalResortData.data.longest_run!='Unknown'">Longest Run:</dt>
                                 <dd ng-show="!!modalResortData.data.longest_run && modalResortData.data.longest_run!='Unknown'">{{modalResortData.data.longest_run*3.28084 | number:0}}ft</li></dd>
                                 <dt ng-show="!!modalResortData.data.night_skiing && modalResortData.data.night_skiing!='Unknown'">Night Skiing:</dt>
                                 <dd ng-show="!!modalResortData.data.night_skiing && modalResortData.data.night_skiing!='Unknown'">{{modalResortData.data.night_skiing}}</li></dd>
                                 <dt ng-show="!!modalResortData.data.opening_year && modalResortData.data.opening_year!='Unknown'">Opening Year:</dt>
                                 <dd ng-show="!!modalResortData.data.opening_year && modalResortData.data.opening_year!='Unknown'">{{modalResortData.data.opening_year}}</li></dd>
                                 <dt ng-show="!!modalResortData.data.owner && modalResortData.data.owner!='Unknown'">Owner:</dt>
                                 <dd ng-show="!!modalResortData.data.owner && modalResortData.data.owner!='Unknown'">{{modalResortData.data.owner}}</li></dd>
                                 <dt ng-show="!!modalResortData.data.run_count && modalResortData.data.run_count!='Unknown'">Run Count:</dt>
                                 <dd ng-show="!!modalResortData.data.run_count && modalResortData.data.run_count!='Unknown'">{{modalResortData.data.run_count | number}}</li></dd>
                                 <dt ng-show="!!modalResortData.data.skiable_acreage && modalResortData.data.skiable_acreage!='Unknown'">Skiable Acreage:</dt>
                                 <dd ng-show="!!modalResortData.data.skiable_acreage && modalResortData.data.skiable_acreage!='Unknown'">{{modalResortData.data.skiable_acreage | number}} acres</li></dd>
                                 <dt ng-show="!!modalResortData.data.terrain_park && modalResortData.data.terrain_park!='Unknown'">Terrain Park:</dt>
                                 <dd ng-show="!!modalResortData.data.terrain_park && modalResortData.data.terrain_park!='Unknown'">{{modalResortData.data.terrain_park}}</li></dd>
                                 <dt ng-show="!!modalResortData.data.top_elevation && modalResortData.data.top_elevation!='Unknown'">Top Elevation:</dt>
                                 <dd ng-show="!!modalResortData.data.top_elevation && modalResortData.data.top_elevation!='Unknown'">{{modalResortData.data.top_elevation*3.28084 | number:0}}ft</li></dd>
                                 </li>
                              </ul>
                           </div>
                           <div class="modal-footer">
                              <button class="btn btn-primary" type="button" ng-click="ok()">Close</button>
                           </div>`,
               controller: 'ModalInstanceCtrl',
               resolve: {
                  modalData: function () {
                     return $scope.modalData;
                  }
               }
            });

            modalInstance.result.then(function (selectedItem) {
               $scope.selected = selectedItem;
            }, function () {
               // console.log('modal closed');
            });
         };

         $scope.infoModal = function() {
            var infoModal = $uibModal.open({
                  animation: $scope.animationsEnabled,
                  template: `<div class="modal-header">
                                 <h3 class="modal-title">
                                    <div class="row">
                                       <div class="col-xs-11">
                                          <span><i class="fa fa-info-circle" aria-hidden="true"></i> Information</span>
                                       </div>
                                       <div class="col-xs-1">
                                          <button class="btn btn-sm" style="float:right; clear:all;" ng-click="ok()">X</button>
                                       </div>
                                    </div>
                                 </h3>
                              </div>
                              <div class="modal-body">
                                 <p><b>Who is Johnathan Buckhouse?</b></p>
                                 <p><a href="https://www.youtube.com/c/JohnathanBuckhouse" target="_blank">Johnathan Buckhouse</a> is a Colorado based professional YouTuber/Snowboarder trying to visit, film a vlog and film a resort review at every ski resort in the U.S.</p>
                                 <br>
                                 <p><b>What is the Buckhouse Ski Map?</b></p>
                                 <p>This website is a resource for learning more about ski resorts (big or small) through Johnathan's vlogs, trick breakdowns as well as resort reviews.</p>
                                 <br>  
                                 <p><b>How do I get my name on the map?</b></p>
                                 <p>See Johnathan's <a href="https://www.youtube.com/channel/UC_i8SQjQOrPUpD3tpjMEuAw/join" target="_blank">YouTube Membership</a> page of level DREAMER for more information.</p>
                                 <br>
                                 <p><b>What do the colors on the map mean?</b></p>
                                 <ul class="list-unstyled">
                                    <li>
                                       <img src="img/snowboard_marker/visited.png" alt="plain marker" width="12" height="20"> Johnathan has visited this location.
                                    </li>
                                    <li>
                                       <img src="img/snowboard_marker/not_visited.png" alt="plain marker" width="12" height="20"> Johnathan has not visited this location yet! Check back soon.
                                    </li>
                                    <li>
                                       <img src="img/snowboard_marker/unofficial.png" alt="plain marker" width="12" height="20"> Johnathan has visited this location but it's not an official ski resort.
                                    </li>
                                 </ul>
                                 <br>                                                                 
                                 <p><b>What is the goal of this website?</b></p>
                                 <p>The goal of this website is to become the most comprehensive U.S. ski resort database on the internet.</p>
                                 <br>
                                 <p><b>How can I support this goal?</b></p>
                                 <p>You can support Johnathan by joining his <a href="https://www.youtube.com/channel/UC_i8SQjQOrPUpD3tpjMEuAw/join" target="_blank">YouTube Membership</a> or his <a href="https://www.patreon.com/JohnathanBuckhouse" target="_blank">Patreon</a>.</p>
                                 <br>                                 
                                 <p><b>How can I help improve this website?</b></p>
                                 <p>Feedback is welcome and apperciated! Email Kenny <a href="mailto:shellnut@gmail.com?subject=Buckhouse Ski Map">shellnut@gmail.com</a> with any suggestions or questions. If you're a developer, check out the <a target="_blank" href="https://github.com/Shellnut/Buckhouse">Github</a>.</p>
                              </div>
                              <div class="modal-footer">
                                 <button class="btn btn-primary" type="button" ng-click="ok()">Close</button>
                              </div>`,
                  controller: 'InfoModal'
               });
               infoModal.result.then(function() {
                  // console.log('done!');
               }, function () {
            });
         }

         $scope.calendarModal = function() {
            var calendarModal = $uibModal.open({
                  animation: $scope.animationsEnabled,
                  template: `<div class="modal-header">
                                 <h3 class="modal-title">
                                    <div class="row">
                                       <div class="col-xs-11">
                                          <span><i class="fa fa-calendar" aria-hidden="true"></i> Travel</span>
                                       </div>
                                       <div class="col-xs-1">
                                          <button class="btn btn-sm" style="float:right; clear:all;" ng-click="ok()">X</button>
                                       </div>
                                    </div>
                                 </h3>
                              </div>
                              <div class="modal-body">
                                 <div class="alert alert-warning" role="alert">
                                    <i class="fa fa-exclamation-triangle"></i> Please note that none of these dates are 100% guaranteed and that travel is subject to change. Check Johnathan's social media accounts for realtime updates.
                                 </div>
                                 <iframe src="https://calendar.google.com/calendar/embed?src=Y29keXB1bGwxOTk1QGdtYWlsLmNvbQ&src=YWRkcmVzc2Jvb2sjY29udGFjdHNAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&src=cmRrZDRzODR1dHVhaWRuMmZlamIzNmpuOG9AZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ" style="border:solid 1px #777" width="100%" height="70%" frameborder="0" scrolling="no"></iframe>
                              </div>
                              <div class="modal-footer">
                                 <button class="btn btn-primary" type="button" ng-click="ok()">Close</button>
                              </div>`,
                  controller: 'CalendarModal'
               });
               calendarModal.result.then(function() {
                  // console.log('done!');
               }, function () {
            });
         }

         $scope.timelineModal = function() {

            $scope.modalData = {'videoData': videoData, 'unitedStatesData': unitedStatesData};
            modalData = {'videoData': videoData, 'unitedStatesData': unitedStatesData}

            var myVideos = modalData.unitedStatesData
               .filter(val => val.officialSkiResort && (val.videos.length > 0))
               .map(val => {
                  var myId = val.videos[val.videos.length-1]; 
                  var myInfo = modalData.videoData.filter(vidDataVal => vidDataVal.id === myId)[0];
                     return {
                        id: myId,
                        resortName: val.resortName,
                        city: val.city,
                        state: val.state,
                        title: myInfo.title,
                        date: myInfo.date
                     }
               })
              .sort((a,b) => new Date(b.date) - new Date(a.date));

            // Add index
            myVideos.forEach((val, i, arr) => arr[i].index = arr.length-i);

            var myHtml = myVideos.map((val, i) => {

               var firstVideo = `
               <div class="embed-responsive embed-responsive-16by9">
                  <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/${val.id}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
               </div>`; 
               var subsuquentVideos = `<a target="_blank" href="https://www.youtube.com/watch/${val.id}">${val.title}</a>`


               return `
               <div class="panel panel-default">
                  <div class="panel-heading"><b>U.S. Ski Resort #${val.index}</b> <span class="pull-right">${new Date(val.date).toLocaleDateString("en-US")}</span></div>
                  <div class="panel-body">
                     <p>${i===0 ? firstVideo : subsuquentVideos}</p>
                     <p><i class="fa fa-map-pin" aria-hidden="true"></i> ${val.resortName} located in ${val.city}, ${val.state}</p>
                  </div>
               </div>`
            }).join('\n')

            var timelineModal = $uibModal.open({
                  animation: $scope.animationsEnabled,
                  template: `<div class="modal-header">
                                 <h3 class="modal-title">
                                    <div class="row">
                                       <div class="col-xs-11">
                                          <span><i class="fa fa-line-chart" aria-hidden="true"></i> Johnathan's Travel Progress</span>
                                       </div>
                                       <div class="col-xs-1">
                                          <button class="btn btn-sm" style="float:right; clear:all;" ng-click="ok()">X</button>
                                       </div>
                                    </div>
                                 </h3>
                              </div>
                              <div class="modal-body">
                                 ${myHtml}
                              </div>
                              <div class="modal-footer">
                                 <button class="btn btn-primary" type="button" ng-click="ok()">Close</button>
                              </div>`,
                  controller: 'TimelineModal',
                  resolve: {
                  modalData: function () {
                     return $scope.modalData;
                  }
               }
               });
               timelineModal.result.then(function() {
                  // console.log('done!');
               }, function () {
            });
         }

         $scope.mapModal = function(modalData) {

            $scope.modalData = modalData;

            var mapModal = $uibModal.open({
                  animation: $scope.animationsEnabled,
                  template: `<div class="modal-header">
                                 <h3 class="modal-title">
                                    <div class="row">
                                       <div class="col-xs-11">
                                          <span><i class="fa fa-map-o" aria-hidden="true"></i> ${modalData.resortName} Map</span>
                                       </div>
                                       <div class="col-xs-1">
                                          <button class="btn btn-sm" style="float:right; clear:all;" ng-click="ok()">X</button>
                                       </div>
                                    </div>
                                 </h3>
                              </div>
                              <div class="modal-body">
                                 <a href="${modalData.mapLink}"><img src="${modalData.mapLink}" width="100%"></a>
                                 <hr>
                                 <p><i>Map credit goes to skimap.org</i></p>
                                 <p>Click <a href="https://skimap.org/SkiAreas/view/${modalData.id}">here</a> for more map infomarion</p>
                              </div>
                              <div class="modal-footer">
                                 <button class="btn btn-primary" type="button" ng-click="ok()">Close</button>
                              </div>`,
                  controller: 'MapModal',
                  resolve: {
                  modalData: function () {
                     return $scope.modalData;
                  }
               }
               });
               mapModal.result.then(function() {
                  // console.log('done!');
               }, function () {
            });
         }

         $scope.webcamModal = function(modalData) {

            var webcamModal = $uibModal.open({
                  animation: $scope.animationsEnabled,
                  template: `<div class="modal-header">
                                 <h3 class="modal-title">
                                    <div class="row">
                                       <div class="col-xs-11">
                                          <span><i class="fa fa-video-camera" aria-hidden="true"></i> ${modalData.resortName} Webcam</span>
                                       </div>
                                       <div class="col-xs-1">
                                          <button class="btn btn-sm" style="float:right; clear:all;" ng-click="ok()">X</button>
                                       </div>
                                    </div>
                                 </h3>
                              </div>
                              <div class="modal-body">
                                 ${modalData.webcam.map(val => {
                                    return '<h4>' + val.title + '</h4>' +
                                           '<div class="embed-responsive embed-responsive-16by9">' +
                                           '    <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/' + val.link + '?&autoplay=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>' +
                                           '</div>'
                                 }).join('<br>')}
                              </div>
                              <div class="modal-footer">
                                 <button class="btn btn-primary" type="button" ng-click="ok()">Close</button>
                              </div>`,
                  controller: 'WebcamModal'
               });
               webcamModal.result.then(function() {
                  // console.log('done!');
               }, function () {
            });
         }

         $scope.toggleAnimation = function () {
            $scope.animationsEnabled = !$scope.animationsEnabled;
         };
      }]);

      // Info Modal Controller
      app.controller('InfoModal', function($scope, $uibModalInstance) {
         // Close Modal
         $scope.ok = function () {
            $uibModalInstance.close();
         };
      })

      // Modal controller      
      app.controller('ModalInstanceCtrl', function ($scope, $uibModalInstance, $http, modalData) {

         $scope.modalData = modalData;

         // Changing starts out of 5 because out of 10 is too cluttered. Can't divide by 2 in mg-model. 
         $scope.price = modalData.resortReview.price/2;
         $scope.easeOfAccess = modalData.resortReview.easeOfAccess/2;
         $scope.lodging = modalData.resortReview.lodging/2;
         $scope.chairLifts = modalData.resortReview.chairLifts/2;
         $scope.runs = modalData.resortReview.runs/2;
         $scope.terrainPark = modalData.resortReview.terrainPark/2;
         $scope.food = modalData.resortReview.food/2;
         $scope.employees = modalData.resortReview.employees/2;
         $scope.views = modalData.resortReview.views/2;
         $scope.fun = modalData.resortReview.fun/2;
         $scope.parking = modalData.resortReview.parking/2;
         $scope.wouldIGoBack = modalData.resortReview.wouldIGoBack/2;

         // Get data from skimap API
         $http({
            method: 'GET',
            url: `https://skimap.org/SkiAreas/view/${modalData.id}.json`,
         }).then(function success(response) {
            $scope.modalResortData = response;
         }, function error(response) {
            // this function will be called when the request returned error status
            console.log(`I'm sorry. Something went wrong`, response);            
         });

         // Close Modal
         $scope.ok = function () {
            $uibModalInstance.close();
         };
      });

      // Modal controller      
      app.controller('GlobalWarningModal', function ($scope, $uibModalInstance) {
         // Continue Modal
         $scope.continue = function () {
            $uibModalInstance.close();
         };
         // Cancel Modal
         $scope.cancel = function () {
            $uibModalInstance.dismiss();
         };
      });

      // Map Modal controller      
      app.controller('MapModal', function ($scope, $uibModalInstance, modalData) {
         $scope.modalData = modalData;
         // Close Modal
         $scope.ok = function () {
            $uibModalInstance.close();
         };
      });

      // Calendar Modal Controller
      app.controller('CalendarModal', function($scope, $uibModalInstance) {
         // Close Modal
         $scope.ok = function () {
            $uibModalInstance.close();
         };
      });

      // Webcam Modal Controller
      app.controller('WebcamModal', function($scope, $uibModalInstance) {
         // Close Modal
         $scope.ok = function () {
            $uibModalInstance.close();
         };
      });

      // Map Modal controller      
      app.controller('TimelineModal', function ($scope, $uibModalInstance, modalData) {
         $scope.modalData = modalData;
         // Close Modal
         $scope.ok = function () {
            $uibModalInstance.close();
         };
      });

      // // Set the default view
      // var defaultCoordinates = [39.480243, -106.06667]; // breckenridge coords
      // var defaultZoom = 4;

      // var mymap = L.map('mapid').setView(defaultCoordinates, defaultZoom);

      // L.tileLayer('http://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      //    minZoom: 1,
      //    maxZoom: 18,
      //    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
      //    id: 'mapbox/streets-v11',
      //    tileSize: 512,
      //    zoomOffset: -1
      // }).addTo(mymap);

      // // Add fullscreen control
      // mymap.addControl(new L.Control.Fullscreen({
      //    title: {
      //       'false': 'View Fullscreen',
      //       'true': 'Exit Fullscreen'
      //    }
      // }));

      // // Add a legend
      // var legend = L.control({position: 'bottomright'});

      // legend.onAdd = function (map) {

      //    var div = L.DomUtil.create('div', 'legend info');

      //    div.innerHTML =
      //       '<b><i class="fa fa-trophy"></i> DREAMER Memberships</b><br>' +
      //       '<span>Dan Da Man</span><br>' +
      //       '<span>Jeff Abbott</span><br>' +
      //       '<span>Dylan Crawford</span><br>' +
      //       '<span>Rick Kinser</span><br>' +
      //       '<span>Lee Bush</span><br>' + 
      //       '<span>Nathan Chabot</span><br>' + 
      //       '<span>BigAnt6493</span><br>' + 
      //       '<span>Lee Miller</span>';
                  
      //    return div;
      // };

      // legend.addTo(mymap);

      // // Change default options
      // L.control.rainviewer({ 
      //    position: 'bottomleft',
      //    nextButtonText: '>',
      //    playStopButtonText: 'Play/Stop',
      //    prevButtonText: '<',
      //    positionSliderLabelText: "Hour:",
      //    opacitySliderLabelText: "Opacity:",
      //    animationInterval: 500,
      //    opacity: 1
      // }).addTo(mymap);

      // // Load the icon preference
      // var iconPreference;
      // if (!!localStorage.getItem('plainMarker')) {
      //    iconPreference = 'plain_marker';
      // }
      // else {
      //    iconPreference = 'snowboard_marker';
      // }
   
      // // Load the region line preference
      // var regionPreference = !!localStorage.getItem('showRegions');

      // // If the user wants to see the region
      // if (regionPreference) {
      //    var regionColor = {
      //       'New England': 'red',
      //       'Mid-Atlantic': 'orange',
      //       'Southeast': 'yellow',
      //       'Midwest': 'green',
      //       'Rocky Mountains': 'blue',
      //       'West Coast': 'purple'
      //    }
      //    // Loop over geo json data
      //    for (var i=0; i<geoJsonData.features.length; i++) {
      //       var geoColor = regionColor[geoJsonData.features[i].properties.region];
      //       // loop over sets of geo json data (ex: hawaii has several sets b.c. of the islands)
      //       if (geoJsonData.features[i].geometry.type === 'Polygon') {
      //          var myCoords = geoJsonData.features[i].geometry.coordinates[0].map(val => [val[1], val[0]]);
      //          L.polygon(myCoords, {color: geoColor})
      //             .addTo(mymap)
      //             .bindPopup(geoJsonData.features[i].properties.region + ' Region');
      //       }
      //       // Multi Polygon arrays are organized super weird!!
      //       else if (geoJsonData.features[i].geometry.type === 'MultiPolygon') {
      //          var myArray = geoJsonData.features[i].geometry.coordinates.map(val => val[0]);
      //          for (var j=0; j<myArray.length; j++) {
      //             var myCoords = myArray[j].map(val => [val[1], val[0]]);
      //             L.polygon(myCoords, {color: geoColor})
      //              .addTo(mymap)
      //              .bindPopup(geoJsonData.features[i].properties.region + ' Region');
      //          }
      //       }
      //    } 
      // }


      // // Green Icon (visited)
      // var greenIcon = new L.Icon({
      //   iconUrl: `img/${iconPreference}/visited.png`,
      //   shadowUrl: 'img/marker_shadow.png',
      //   iconSize: [25, 41],
      //   iconAnchor: [12, 41],
      //   popupAnchor: [1, -34],
      //   shadowSize: [41, 41]
      // });

      // // black Icon (unofficial ski resort)
      // var blackIcon = new L.Icon({
      //   iconUrl: `img/${iconPreference}/unofficial.png`,
      //   shadowUrl: 'img/marker_shadow.png',
      //   iconSize: [25, 41],
      //   iconAnchor: [12, 41],
      //   popupAnchor: [1, -34],
      //   shadowSize: [41, 41]
      // });

      // // Red Icon (not yet visited)
      // var redIcon = new L.Icon({
      //   iconUrl: `img/${iconPreference}/not_visited.png`,
      //   shadowUrl: 'img/marker_shadow.png',
      //   iconSize: [25, 41],
      //   iconAnchor: [12, 41],
      //   popupAnchor: [1, -34],
      //   shadowSize: [41, 41]
      // });

      // // Green Ski Icon (visited)
      // var greenSkiIcon = new L.Icon({
      //   iconUrl: `img/${iconPreference}/visited_ski.png`,
      //   shadowUrl: 'img/marker_shadow.png',
      //   iconSize: !!localStorage.getItem('plainMarker') ? [25, 41] : [35, 57],
      //   iconAnchor: [12, 41],
      //   popupAnchor: [1, -34],
      //   shadowSize: [41, 41]
      // });

      // // Red Ski Icon (not yet visited)
      // var redSkiIcon = new L.Icon({
      //   iconUrl: `img/${iconPreference}/not_visited_ski.png`,
      //   shadowUrl: 'img/marker_shadow.png',
      //   iconSize: !!localStorage.getItem('plainMarker') ? [25, 41] : [35, 57],
      //   iconAnchor: [12, 41],
      //   popupAnchor: [1, -34],
      //   shadowSize: [41, 41]
      // });

      // // Green Helicopter Icon (visited)
      // var greenHelicopterIcon = new L.Icon({
      //   iconUrl: `img/${iconPreference}/visited_helicopter.png`,
      //   shadowUrl: 'img/marker_shadow.png',
      //   iconSize: !!localStorage.getItem('plainMarker') ? [25, 41] : [40, 45],
      //   iconAnchor: [12, 41],
      //   popupAnchor: [1, -34],
      //   shadowSize: [41, 41]
      // });

      // // Red Helicopter Icon (not yet visited)
      // var redHelicopterIcon = new L.Icon({
      //   iconUrl: `img/${iconPreference}/not_visited_helicopter.png`,
      //   shadowUrl: 'img/marker_shadow.png',
      //   iconSize: !!localStorage.getItem('plainMarker') ? [25, 41] : [40, 45],
      //   iconAnchor: [12, 41],
      //   popupAnchor: [1, -34],
      //   shadowSize: [41, 41]
      // });

      // // Green Helicopter Icon (visited)
      // var greenSnowcatIcon = new L.Icon({
      //   iconUrl: `img/${iconPreference}/visited_snowcat.png`,
      //   shadowUrl: 'img/marker_shadow.png',
      //   iconSize: !!localStorage.getItem('plainMarker') ? [25, 41] : [50, 45],
      //   iconAnchor: [12, 41],
      //   popupAnchor: [1, -34],
      //   shadowSize: [41, 41]
      // });

      // // Red Helicopter Icon (not yet visited)
      // var redSnowcatIcon = new L.Icon({
      //   iconUrl: `img/${iconPreference}/not_visited_snowcat.png`,
      //   shadowUrl: 'img/marker_shadow.png',
      //   iconSize: !!localStorage.getItem('plainMarker') ? [25, 41] : [50, 45],
      //   iconAnchor: [12, 41],
      //   popupAnchor: [1, -34],
      //   shadowSize: [41, 41]
      // });


      // // Red Helicopter Icon (not yet visited)
      // var homeIcon = new L.Icon({
      //   iconUrl: `img/${iconPreference}/home.png`,
      //   shadowUrl: 'img/marker_shadow.png',
      //   iconSize: [25, 35],
      //   iconAnchor: [12, 41],
      //   popupAnchor: [1, -34],
      //   shadowSize: [41, 41]
      // });

      // var allDataMap = [];
      // if (!!localStorage.getItem('showGlobal')) {
      //    allDataMap = JSON.parse(JSON.stringify(unitedStatesData)).concat(JSON.parse(JSON.stringify(globalData)));
      // }
      // else {
      //    allDataMap = JSON.parse(JSON.stringify(unitedStatesData));
      // }

      // Get pass options from localStorage
      var showPasses = localStorage.getItem('showPasses');
      if (showPasses && showPasses !=='all') {
         if (showPasses === 'No Pass Associated') {
            allDataMap = JSON.parse(JSON.stringify(unitedStatesData)).filter(val =>  val.officialSkiResort && val.skiPass.length < 1);
         }
         else {
            allDataMap = JSON.parse(JSON.stringify(globalData)).filter(val => val.skiPass.includes(showPasses));
         }
      }

      // Get visited options from localStorage
      var showVisited = localStorage.getItem('showVisited');
      if (showVisited && showVisited !=='all') {
         if (showVisited === 'Visited') {
            allDataMap = JSON.parse(JSON.stringify(unitedStatesData)).filter(val => val.videos.length > 0);
         }
         else if (showVisited === 'Not Visited') {
            allDataMap = JSON.parse(JSON.stringify(unitedStatesData)).filter(val => val.videos.length < 1);
         }
      }

      // Get reviewed options from localStorage
      var showReviewed = localStorage.getItem('showReviewed');
      if (showReviewed && showReviewed !=='all') {
         allDataMap = JSON.parse(JSON.stringify(unitedStatesData)).filter(val => val.resortReview.score);
      }

      // for (var i = 0; i<allDataMap.length; i++) {

      //   // Assign the icon color (visited or not)   
      //   var icon;
      //   var circleColor;
      //   if (allDataMap[i].resortName === 'Backyard Parks in Summit County') {
      //      icon = homeIcon; // not yet visited for helicopter only resort
      //      circleColor = 'black';
      //   }
      //   else if (!allDataMap[i].officialSkiResort) {
      //      icon = blackIcon; // unofficial ski resort
      //      circleColor = 'black';
      //   }
      //   else if (allDataMap[i].skiOnly && allDataMap[i].videos.length > 0) {
      //      icon = greenSkiIcon; // visited ski only resort
      //      circleColor = 'green';
      //   }
      //   else if (allDataMap[i].skiOnly && allDataMap[i].videos.length === 0) {
      //      icon = redSkiIcon; // not yet visited for ski only resort
      //      circleColor = 'red';
      //   }
      //   else if (allDataMap[i].helicopterOnly && allDataMap[i].videos.length > 0) {
      //      icon = greenHelicopterIcon; // visited helicopter only resort
      //      circleColor = 'green';
      //   }
      //   else if (allDataMap[i].helicopterOnly && allDataMap[i].videos.length === 0) {
      //      icon = redHelicopterIcon; // not yet visited for helicopter only resort
      //      circleColor = 'black';
      //   }
      //   else if (allDataMap[i].snowcatOnly && allDataMap[i].videos.length > 0) {
      //      icon = greenSnowcatIcon; // visited helicopter only resort
      //      circleColor = 'green';
      //   }
      //   else if (allDataMap[i].snowcatOnly && allDataMap[i].videos.length === 0) {
      //      icon = redSnowcatIcon; // not yet visited for helicopter only resort
      //      circleColor = 'red';
      //   }
      //   else if (allDataMap[i].videos.length > 0) {
      //      icon = greenIcon; // visited
      //      circleColor = 'green';
      //   }
      //   else {
      //      icon = redIcon; // not yet visited
      //      circleColor = 'red';
      //   }

      //   // Generate the video link html
      //   var videoLinks;
      //   if (allDataMap[i].videos.length === 0) {
      //     videoLinks = `<p>Johnathan hasn't traveled here yet! Check back soon</p>`;
      //   }
      //   else if (allDataMap[i].videos.length === 1) {
      //     videoLinks = `<p>Here is the only video of Johnathan from this location <iframe src="https://www.youtube-nocookie.com/embed/${allDataMap[i].videos[0]}?playlist=${allDataMap[i].videos.join(',')}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>`;
      //   }
      //   else if (allDataMap[i].videos.length > 1) {
      //      if (allDataMap[i].videos.length > 200) {
      //        videoLinks = `<p>Here are ${allDataMap[i].videos.length} videos (in 2 playlists) of Johnathan from this location <iframe src="https://www.youtube-nocookie.com/embed/${allDataMap[i].videos[0]}?playlist=${allDataMap[i].videos.slice(0, 200).join(',')}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>` +
      //        `<p><iframe src="https://www.youtube-nocookie.com/embed/${allDataMap[i].videos[200]}?playlist=${allDataMap[i].videos.slice(200).join(',')}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>`
      //      }
      //      else {
      //        videoLinks = `<p>Here are ${allDataMap[i].videos.length} videos (in a playlist) of Johnathan from this location <iframe src="https://www.youtube-nocookie.com/embed/${allDataMap[i].videos[0]}?playlist=${allDataMap[i].videos.join(',')}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>`;              
      //      }
      //   }

      //   // Disclaimer for unofficial ski resorts
      //   var officialSkiResortWarning = '';        
      //   if (!allDataMap[i].officialSkiResort) {
      //     officialSkiResortWarning = '<p><b>Note</b>: this is not an official ski resort</p>';
      //   }

      //   // Link to the website 
      //   var modalTitle = '';
      //   if (allDataMap[i].website) {
      //     modalTitle = `<h4 id="firstHeading" class="firstHeading"><a href="${allDataMap[i].website}" target="_blank" title="Resort Website">${allDataMap[i].resortName}, ${allDataMap[i].state || allDataMap[i].country || (allDataMap[i].position.lat + ' ' + allDataMap[i].position.lng)}</a></h4>`;
      //   }
      //   else {
      //       modalTitle = `<h4 id="firstHeading" class="firstHeading">${allDataMap[i].resortName}, ${allDataMap[i].state || allDataMap[i].country || (allDataMap[i].position.lat + ' ' + allDataMap[i].position.lng)}</h4>`;
      //   }

      //   // Link to the score
      //   var resortReview = '';
      //   if (allDataMap[i].resortReview.score && !allDataMap[i].resortReview.note) {
      //     resortReview = `<p>Johnathan's Resort Review Score: <a target="_blank" href="https://www.youtube.com/watch/${allDataMap[i].resortReview.link}">${allDataMap[i].resortReview.score}/100</a></p>`;
      //   }
      //   else if (allDataMap[i].resortReview.score && allDataMap[i].resortReview.note) {
      //     resortReview = `<p>Johnathan's Resort Review Score: <a target="_blank" href="https://www.youtube.com/watch/${allDataMap[i].resortReview.link}">${allDataMap[i].resortReview.score}/100</a>*<br/><small>*${allDataMap[i].resortReview.note}</small></p>`;
      //   }

      //   // Link to the ski pass(es)
      //   var skiPasses = '';
      //   if (allDataMap[i].skiPass.length > 0) {
      //    var passes = [
      //       {
      //          name: 'Epic',
      //          link: `<a target="_blank" href="https://www.epicpass.com">Epic</a>`
      //       },
      //       {
      //          name: 'Ikon',
      //          link: `<a target="_blank" href="https://www.ikonpass.com">Ikon</a>`
      //       },
      //       {
      //          name: 'Mountain Collective',
      //          link: `<a target="_blank" href="https://www.mountaincollective.com">Mountain Collective</a>`
      //       },
      //       {
      //          name: 'Powder Alliance',
      //          link: `<a target="_blank" href="https://www.powderalliance.com">Powder Alliance</a>`
      //       },
      //       {
      //          name: 'Indy',
      //          link: `<a target="_blank" href="https://www.indyskipass.com/">Indy</a>`
      //       }
      //    ];
      //    skiPasses = `<p>${(allDataMap[i].skiPass.length>1) ? 'Ski Passes:' : 'Ski Pass:'} ${passes.filter(val => allDataMap[i].skiPass.includes(val.name)).map(val => val.link).join(', ')}`;
      //   }

      //   // HTML popup content
      //   var popupContent = '<div id="content">' +
      //              '<div id="siteNotice">' +
      //              '</div>' +
      //              modalTitle +
      //              '<div id="bodyContent">' +
      //              resortReview +
      //              skiPasses +
      //              officialSkiResortWarning +
      //              videoLinks +
      //              '</div>' +
      //              '</div>';

      //   // Popup otions for the leaflet map library
      //   var popupOptions = {
      //     // maxHeight: 600,
      //     // minWidth: 400
      //   };

      //   if (!!localStorage.getItem('showGlobal')) {
      //       // Light weight marker
      //       var circleMarker = L.circleMarker([allDataMap[i].position.lat, allDataMap[i].position.lng], {
      //          color: circleColor,
      //          radius: 5
      //       })
      //         .addTo(mymap)
      //         .bindPopup(popupContent, popupOptions);
      //   }
      //   else {           
      //     // Marker options
      //     L.marker([allDataMap[i].position.lat, allDataMap[i].position.lng], {icon: icon})
      //       .addTo(mymap)
      //       .bindPopup(popupContent, popupOptions)
      //       .bindTooltip(allDataMap[i].resortName + (allDataMap[i].officialSkiResort ? '' : ' (unofficial ski resort)'));
      //   }

      // }

      // // Pans to corresponding resort
      // function tableRowClick(x) {
      //    var clickedResortInfoArray = (x.innerText.trim()).split("	");
         
      //    for (i = 0; i < allDataMap.length; ++i) {
      //       var resort = allDataMap[i];
      //       if (resort.resortName == clickedResortInfoArray[0].trim() && resort.region == clickedResortInfoArray[3].trim() && resort.city == clickedResortInfoArray[5].trim()) {
               
      //          var coords = L.latLng(resort.position.lat, resort.position.lng);

      //          mymap.setView(coords, 10);

      //       }
      //    }
      // }

   </script>

   <!-- Services -->
   <script src="services/myUtilities.js"></script>

   <!-- Controllers -->
   <script src="controllers/locationController.js"></script>

</html>
